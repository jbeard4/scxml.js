(function(){function require(a,b,c){var d=require.resolve(a);if(null==d){c=c||a,b=b||"root";var e=new Error('Failed to require "'+c+'" from "'+b+'"');throw e.path=c,e.parent=b,e.require=!0,e}var f=require.modules[d];return f.exports||(f.exports={},f.client=f.component=!0,f.call(this,f.exports,require.relative(d),f)),f.exports}require.modules={},require.aliases={},require.resolve=function(a){a.charAt(0)==="/"&&(a=a.slice(1));var b=a+"/index.js",c=[a,a+".js",a+".json",a+"/index.js",a+"/index.json"];for(var d=0;d<c.length;d++){var a=c[d];if(require.modules.hasOwnProperty(a))return a}if(require.aliases.hasOwnProperty(b))return require.aliases[b]},require.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},require.register=function(a,b){require.modules[a]=b},require.alias=function(a,b){if(!require.modules.hasOwnProperty(a))throw new Error('Failed to alias "'+a+'", it does not exist');require.aliases[b]=a},require.relative=function(a){function c(a,b){var c=a.length;while(c--)if(a[c]===b)return c;return-1}function d(b){var c=d.resolve(b);return require(c,a,b)}var b=require.normalize(a,"..");return d.resolve=function(d){var e=d.charAt(0);if("/"==e)return d.slice(1);if("."==e)return require.normalize(b,d);var f=a.split("/"),g=c(f,"deps")+1;return g||(g=0),d=f.slice(0,g+1).join("/")+"/deps/"+d,d},d.exists=function(a){return require.modules.hasOwnProperty(d.resolve(a))},d},require.register("jbeard4-scion-ng/lib/scion.js",function(a,b,c){(function(b,d){typeof a=="object"?c.exports=d():typeof define=="function"&&define.amd?define(d):b.SCION=d()})(this,function(){function b(b){function g(a){f[a]===undefined&&(f[a]=0);var b=f[a]++;return"$generated-"+a+"-"+b}function h(a){return{states:[{type:"initial",transitions:[{target:a}]},a]}}function i(b,f){f.transitions&&c.push.apply(c,f.transitions);if(f.id){if(d[f.id])throw new Error("Redefinition of state id "+f.id);d[f.id]=f}f.type=f.type||"state",f.ancestors=b,f.depth=b.length,f.parent=b[0],f.transitions=f.transitions||[],f.transitions.forEach(function(a){a.documentOrder=e++,a.source=f});var h=i.bind(null,[f].concat(b));f.states&&f.states.forEach(h);switch(f.type){case"parallel":f.typeEnum=a.PARALLEL;break;case"initial":f.typeEnum=a.INITIAL;break;case"history":f.typeEnum=a.HISTORY;break;case"final":f.typeEnum=a.FINAL;break;case"state":case"scxml":f.states&&f.states.length?f.typeEnum=a.COMPOSITE:f.typeEnum=a.BASIC;break;default:throw new Error("Unknown state type: "+f.type)}f.states?f.descendants=f.states.concat(f.states.map(function(a){return a.descendants}).reduce(function(a,b){return a.concat(b)},[])):f.descendants=[];var j;if(f.typeEnum===a.COMPOSITE){typeof f.initial=="string"?(j=f.states.filter(function(a){return a.id===f.initial}),j.length&&(f.initialRef=j[0])):(j=f.states.filter(function(a){return a.type==="initial"}),f.initialRef=j.length?j[0]:f.states[0]);if(!f.initialRef)throw new Error("Unable to locate initial state for composite state: "+f.id)}if(f.typeEnum===a.COMPOSITE||f.typeEnum===a.PARALLEL){var k=f.states.filter(function(a){return a.type==="history"});f.historyRef=k[0]}f.id||(f.id=g(f.type),d[f.id]=f),["onEntry","onExit"].forEach(function(a){typeof f[a]=="function"&&(f[a]=[f[a]])})}function j(){c.forEach(function(a){typeof a.onTransition=="function"&&(a.onTransition=[a.onTransition])}),c.forEach(function(a){a.event&&(a.events=a.event.trim().split(/ +/))}),c.forEach(function(a){if(a.targets||typeof a.target=="undefined")return;if(typeof a.target=="string"){var b=d[a.target];if(!b)throw new Error("Unable to find target state with id "+a.target);a.target=b,a.targets=[a.target]}else if(Array.isArray(a.target))a.targets=a.target.map(function(b){if(typeof b=="string"){b=d[b];if(!b)throw new Error("Unable to find target state with id "+a.target);return b}return b});else{if(typeof a.target!="object")throw new Error("Transition target has unknown type: "+a.target);a.targets=[a.target]}}),c.forEach(function(a){a.targets&&(a.lcca=l(a.source,a.targets[0])),a.scope=k(a)})}function k(a){var b=a.type==="internal"&&a.source.parent&&a.targets&&a.targets.every(function(b){return a.source.descendants.indexOf(b)>-1});return a.targets?b?a.source:a.lcca:a.source}function l(b,c){var d=[];b.ancestors.forEach(function(b){b.typeEnum===a.COMPOSITE&&b.descendants.indexOf(c)>-1&&d.push(b)});if(!d.length)throw new Error("Could not find LCA for states.");return d[0]}var c=[],d={},e=0,f={},m=h(b);return i([],m),j(),m}function c(a){a=a||[],this.o=[],a.forEach(function(a){this.add(a)},this)}function f(a){var b=a[0],c=a[1];return b.source.depth<c.source.depth?c:c.source.depth<b.source.depth?b:b.documentOrder<c.documentOrder?b:c}function h(a,e){this._model=b(a),this.opts=e||{},this.opts.console=e.console||(typeof console=="undefined"?{log:function(){}}:console),this.opts.Set=this.opts.Set||c,this.opts.priorityComparisonFn=this.opts.priorityComparisonFn||f,this.opts.transitionSelector=this.opts.transitionSelector||d,this._sessionid=this.opts.sessionid||"",this._configuration=new this.opts.Set,this._historyValue={},this._internalEventQueue=[],this._isInFinalState=!1,this._x={_sessionId:e.sessionId||null,_name:a.name||e.name||null,_ioprocessors:e.ioprocessors||null},this._listeners=[],e.InterpreterScriptingContext||e.log("Warning : interpreter scripting context not set"),this._scriptingContext=e.InterpreterScriptingContext?new e.InterpreterScriptingContext(this):{}}function i(a,b){b=b||{},b.InterpreterScriptingContext=b.InterpreterScriptingContext||k,this._isStepping=!1,this._externalEventQueue=[],h.call(this,a,b)}function j(a){function b(){}return b.prototype=a,new b}function k(a){this._interpreter=a,this._timeoutMap={}}"use strict";var a={BASIC:0,COMPOSITE:1,PARALLEL:2,HISTORY:3,INITIAL:4,FINAL:5};c.prototype={add:function(a){if(!this.contains(a))return this.o.push(a)},remove:function(a){var b=this.o.indexOf(a);return b===-1?!1:(this.o.splice(b,1),!0)},union:function(a){return a=a.iter?a.iter():a,a.forEach(function(a){this.add(a)},this),this},difference:function(a){return a=a.iter?a.iter():a,a.forEach(function(a){this.remove(a)},this),this},contains:function(a){return this.o.indexOf(a)>-1},iter:function(){return this.o},isEmpty:function(){return!this.o.length},equals:function(a){var b=a.iter(),c=this.o;return c.every(function(a){return b.indexOf(a)>-1})&&b.every(function(a){return c.indexOf(a)>-1})},toString:function(){return"Set("+this.o.toString()+")"}};var d=function(){function b(a){return new RegExp("^"+a.replace(/\./g,"\\.")+"(\\.[0-9a-zA-Z]+)*$")}function c(c){return a[c]?a[c]:a[c]=b(c)}function d(a,b){return b&&b.name&&(a.events.indexOf("*")>-1?!0:a.events.filter(function(a){return c(a).test(b.name)}).length)}var a={};return function(a,b,c){return a.transitions.filter(function(a){return(!a.events||d(a,b))&&(!a.cond||c(a.cond))})}}(),e={getAncestors:function(a,b){var c,d,e;return d=a.ancestors.indexOf(b),d>-1?a.ancestors.slice(0,d):a.ancestors},getAncestorsOrSelf:function(a,b){return[a].concat(this.getAncestors(a,b))},getDescendantsOrSelf:function(a){return[a].concat(a.descendants)},isOrthogonalTo:function(b,c){return!this.isAncestrallyRelatedTo(b,c)&&this.getLCA(b,c).typeEnum===a.PARALLEL},isAncestrallyRelatedTo:function(a,b){return this.getAncestorsOrSelf(b).indexOf(a)>-1||this.getAncestorsOrSelf(a).indexOf(b)>-1},getLCA:function(a,b){var c=this.getAncestors(a).filter(function(a){return a.descendants.indexOf(b)>-1},this);return c[0]}},g=!1;return h.prototype={start:function(){return g&&this.opts.console.log("performing initial big step"),this._configuration.add(this._model.initialRef),this._performBigStep(),this.getConfiguration()},getConfiguration:function(){return this._configuration.iter().map(function(a){return a.id})},getFullConfiguration:function(){return this._configuration.iter().map(function(a){return[a].concat(e.getAncestors(a))},this).reduce(function(a,b){return a.concat(b)},[]).map(function(a){return a.id}).reduce(function(a,b){return a.indexOf(b)>-1?a:a.concat(b)},[])},isIn:function(a){return this.getFullConfiguration().indexOf(a)>-1},isFinal:function(a){return this._isInFinalState},_performBigStep:function(b){b&&this._internalEventQueue.push(b);var c=!0;while(c){var d=this._internalEventQueue.shift()||null,e=this._performSmallStep(d);c=!e.isEmpty()}this._isInFinalState=this._configuration.iter().every(function(b){return b.typeEnum===a.FINAL})},_performSmallStep:function(b){g&&this.opts.console.log("selecting transitions with currentEvent: ",b);var c=this._selectTransitions(b);g&&this.opts.console.log("selected transitions: ",c);if(!c.isEmpty()){g&&this.opts.console.log("sorted transitions: ",c);var d=new this.opts.Set(c.iter().filter(function(a){return a.targets})),e=this._getStatesExited(d),f=e[0],h=e[1],i=this._getStatesEntered(d),j=i[0],k=i[1];g&&this.opts.console.log("basicStatesExited ",f),g&&this.opts.console.log("basicStatesEntered ",j),g&&this.opts.console.log("statesExited ",h),g&&this.opts.console.log("statesEntered ",k);var l=new this.opts.Set;g&&this.opts.console.log("executing state exit actions");var m=this._evaluateAction.bind(this,b);h.forEach(function(b){(g||this.opts.logStatesEnteredAndExited)&&this.opts.console.log("exiting ",b.id),this._listeners.forEach(function(a){a.onExit&&a.onExit(b.id)}),b.onExit!==undefined&&b.onExit.forEach(m);var c;b.historyRef&&(b.historyRef.isDeep?c=function(c){return c.typeEnum===a.BASIC&&b.descendants.indexOf(c)>-1}:c=function(a){return a.parent===b},this._historyValue[b.historyRef.id]=h.filter(c))},this);var n=c.iter().sort(function(a,b){return a.documentOrder-b.documentOrder});g&&this.opts.console.log("executing transitition actions"),n.forEach(function(a){var b=a.targets&&a.targets.map(function(a){return a.id});this._listeners.forEach(function(c){c.onTransition&&c.onTransition(a.source.id,b)}),a.onTransition!==undefined&&a.onTransition.forEach(m)},this),g&&this.opts.console.log("executing state enter actions"),k.forEach(function(a){(g||this.opts.logStatesEnteredAndExited)&&this.opts.console.log("entering",a.id),this._listeners.forEach(function(b){b.onEntry&&b.onEntry(a.id)}),a.onEntry!==undefined&&a.onEntry.forEach(m)},this),g&&this.opts.console.log("updating configuration "),g&&this.opts.console.log("old configuration ",this._configuration),this._configuration.difference(f),this._configuration.union(j),g&&this.opts.console.log("new configuration ",this._configuration),l.isEmpty()||(g&&this.opts.console.log("adding triggered events to inner queue ",l),this._internalEventQueue.push(l))}return c},_evaluateAction:function(a,b){return b.call(this._scriptingContext,a,this.isIn.bind(this),this._x._sessionId,this._x._name,this._x._ioprocessors,this._x)},_getStatesExited:function(a){var b=new this.opts.Set,c=new this.opts.Set;a.iter().forEach(function(a){var d=a.scope,f=d.descendants;this._configuration.iter().forEach(function(a){f.indexOf(a)>-1&&(c.add(a),b.add(a),e.getAncestors(a,d).forEach(function(a){b.add(a)}))},this)},this);var d=b.iter().sort(function(a,b){return b.depth-a.depth});return[c,d]},_getStatesEntered:function(a){var b={statesToEnter:new this.opts.Set,basicStatesToEnter:new this.opts.Set,statesProcessed:new this.opts.Set,statesToProcess:[]};a.iter().forEach(function(a){a.targets.forEach(function(c){this._addStateAndAncestors(c,a.scope,b)},this)},this);var c;while(c=b.statesToProcess.pop())this._addStateAndDescendants(c,b);var d=b.statesToEnter.iter().sort(function(a,b){return a.depth-b.depth});return[b.basicStatesToEnter,d]},_addStateAndAncestors:function(b,c,d){this._addStateAndDescendants(b,d),e.getAncestors(b,c).forEach(function(b){b.typeEnum===a.COMPOSITE?(d.statesToEnter.add(b),d.statesProcessed.add(b)):this._addStateAndDescendants(b,d)},this)},_addStateAndDescendants:function(b,c){if(c.statesProcessed.contains(b))return;b.typeEnum===a.HISTORY?b.id in this._historyValue?this._historyValue[b.id].forEach(function(a){this._addStateAndAncestors(a,b.parent,c)},this):(c.statesToEnter.add(b),c.basicStatesToEnter.add(b)):(c.statesToEnter.add(b),b.typeEnum===a.PARALLEL?c.statesToProcess.push.apply(c.statesToProcess,b.states.filter(function(b){return b.typeEnum!==a.HISTORY})):b.typeEnum===a.COMPOSITE?c.statesToProcess.push(b.initialRef):(b.typeEnum===a.INITIAL||b.typeEnum===a.BASIC||b.typeEnum===a.FINAL)&&c.basicStatesToEnter.add(b)),c.statesProcessed.add(b)},_selectTransitions:function(a){if(this.opts.onlySelectFromBasicStates)var b=this._configuration.iter();else{var c=new this.opts.Set;this._configuration.iter().forEach(function(a){c.add(a),e.getAncestors(a).forEach(function(a){c.add(a)})},this),b=c.iter()}var f=a&&a.name&&a.name.search("."),h=f?d:this.opts.transitionSelector,i=new this.opts.Set,j=this._evaluateAction.bind(this,a);b.forEach(function(b){h(b,a,j).forEach(function(a){i.add(a)})});var k=this._selectPriorityEnabledTransitions(i);return g&&this.opts.console.log("priorityEnabledTransitions",k),k},_selectPriorityEnabledTransitions:function(a){var b=new this.opts.Set,c=this._getInconsistentTransitions(a),d=c[0],e=c[1];b.union(d),g&&this.opts.console.log("enabledTransitions",a),g&&this.opts.console.log("consistentTransitions",d),g&&this.opts.console.log("inconsistentTransitionsPairs",e),g&&this.opts.console.log("priorityEnabledTransitions",b);while(!e.isEmpty())a=new this.opts.Set(e.iter().map(function(a){return this.opts.priorityComparisonFn(a)},this)),c=this._getInconsistentTransitions(a),d=c[0],e=c[1],b.union(d),g&&this.opts.console.log("enabledTransitions",a),g&&this.opts.console.log("consistentTransitions",d),g&&this.opts.console.log("inconsistentTransitionsPairs",e),g&&this.opts.console.log("priorityEnabledTransitions",b);return b},_getInconsistentTransitions:function(a){var b=new this.opts.Set,c=new this.opts.Set,d=a.iter();g&&this.opts.console.log("transitions",d);for(var e=0;e<d.length;e++)for(var f=e+1;f<d.length;f++){var h=d[e],i=d[f];this._conflicts(h,i)&&(b.add(h),b.add(i),c.add([h,i]))}var j=a.difference(b);return[j,c]},_conflicts:function(a,b){return!this._isArenaOrthogonal(a,b)},_isArenaOrthogonal:function(a,b){g&&this.opts.console.log("transition scopes",a.scope,b.scope);var c=e.isOrthogonalTo(a.scope,b.scope);return g&&this.opts.console.log("transition scopes are orthogonal?",c),c},registerListener:function(a){return this._listeners.push(a)},unregisterListener:function(a){return this._listeners.splice(this._listeners.indexOf(a),1)}},i.prototype=j(h.prototype),i.prototype.gen=function(a,b){var c;switch(typeof a){case"string":c={name:a,data:b};break;case"object":if(typeof a.name!="string")throw new Error('Event object must have "name" property of type string.');c=a;break;default:throw new Error("First argument to gen must be a string or object.")}this._externalEventQueue.push(c);if(this._isStepping)return null;this._isStepping=!0;var d;while(d=this._externalEventQueue.shift())this._performBigStep(d);return this._isStepping=!1,this.getConfiguration()},k.prototype={raise:function(a){this._interpreter._internalEventQueue.push(a)},send:function(a,b){if(b.delay===undefined)this.gen(a);else{if(typeof setTimeout=="undefined")throw new Error("Default implementation of Statechart.prototype.send will not work unless setTimeout is defined globally.");g&&this._interpreter.opts.log("sending event",a.name,"with content",a.data,"after delay",b.delay);var c=setTimeout(this._interpreter.gen.bind(this._interpreter,a),b.delay||0);b.sendid&&(this._timeoutMap[b.sendid]=c)}},cancel:function(a){if(typeof clearTimeout=="undefined")throw new Error("Default implementation of Statechart.prototype.cancel will not work unless setTimeout is defined globally.");a in this._timeoutMap&&(g&&this._interpreter.opts.log("cancelling ",a," with timeout id ",this._timeoutMap[a]),clearTimeout(this._timeoutMap[a]))}},{BaseInterpreter:h,Statechart:i,ArraySet:c,STATE_TYPES:a,initializeModel:b,InterpreterScriptingContext:k}})}),require.register("isaacs-sax-js/lib/sax.js",function(a,b,c){(function(a){function d(b,c){if(!(this instanceof d))return new d(b,c);var e=this;f(e),e.q=e.c="",e.bufferCheckPosition=a.MAX_BUFFER_LENGTH,e.opt=c||{},e.opt.lowercase=e.opt.lowercase||e.opt.lowercasetags,e.looseCase=e.opt.lowercase?"toLowerCase":"toUpperCase",e.tags=[],e.closed=e.closedRoot=e.sawRoot=!1,e.tag=e.error=null,e.strict=!!b,e.noscript=!!b||!!e.opt.noscript,e.state=C.BEGIN,e.ENTITIES=Object.create(a.ENTITIES),e.attribList=[],e.opt.xmlns&&(e.ns=Object.create(v)),e.trackPosition=e.opt.position!==!1,e.trackPosition&&(e.position=e.line=e.column=0),D(e,"onready")}function e(b){var d=Math.max(a.MAX_BUFFER_LENGTH,10),e=0;for(var f=0,g=c.length;f<g;f++){var h=b[c[f]].length;if(h>d)switch(c[f]){case"textNode":F(b);break;case"cdata":E(b,"oncdata",b.cdata),b.cdata="";break;case"script":E(b,"onscript",b.script),b.script="";break;default:H(b,"Max buffer length exceeded: "+c[f])}e=Math.max(e,h)}b.bufferCheckPosition=a.MAX_BUFFER_LENGTH-e+b.position}function f(a){for(var b=0,d=c.length;b<d;b++)a[c[b]]=""}function j(a,b){return new k(a,b)}function k(a,b){if(!(this instanceof k))return new k(a,b);g.apply(this),this._parser=new d(a,b),this.writable=!0,this.readable=!0;var c=this;this._parser.onend=function(){c.emit("end")},this._parser.onerror=function(a){c.emit("error",a),c._parser.error=null},i.forEach(function(a){Object.defineProperty(c,"on"+a,{get:function(){return c._parser["on"+a]},set:function(b){if(!b)return c.removeAllListeners(a),c._parser["on"+a]=b;c.on(a,b)},enumerable:!0,configurable:!1})})}function y(a){return a.split("").reduce(function(a,b){return a[b]=!0,a},{})}function z(a){return Object.prototype.toString.call(a)==="[object RegExp]"}function A(a,b){return z(a)?!!b.match(a):a[b]}function B(a,b){return!A(a,b)}function D(a,b,c){a[b]&&a[b](c)}function E(a,b,c){a.textNode&&F(a),D(a,b,c)}function F(a){a.textNode=G(a.opt,a.textNode),a.textNode&&D(a,"ontext",a.textNode),a.textNode=""}function G(a,b){return a.trim&&(b=b.trim()),a.normalize&&(b=b.replace(/\s+/g," ")),b}function H(a,b){return F(a),a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c),b=new Error(b),a.error=b,D(a,"onerror",b),a}function I(a){return a.closedRoot||J(a,"Unclosed root tag"),a.state!==C.TEXT&&H(a,"Unexpected end"),F(a),a.c="",a.closed=!0,D(a,"onend"),d.call(a,a.strict,a.opt),a}function J(a,b){if(!(typeof a=="object"&&a instanceof d))throw new Error("bad call to strictFail");a.strict&&H(a,b)}function K(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns),a.attribList.length=0}function L(a){var b=a.indexOf(":"),c=b<0?["",a]:a.split(":"),d=c[0],e=c[1];return a==="xmlns"&&(d="xmlns",e=""),{prefix:d,local:e}}function M(a){a.strict||(a.attribName=a.attribName[a.looseCase]());if(a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName))return a.attribName=a.attribValue="";if(a.opt.xmlns){var b=L(a.attribName),c=b.prefix,d=b.local;if(c==="xmlns")if(d==="xml"&&a.attribValue!==t)J(a,"xml: prefix must be bound to "+t+"\n"+"Actual: "+a.attribValue);else if(d==="xmlns"&&a.attribValue!==u)J(a,"xmlns: prefix must be bound to "+u+"\n"+"Actual: "+a.attribValue);else{var e=a.tag,f=a.tags[a.tags.length-1]||a;e.ns===f.ns&&(e.ns=Object.create(f.ns)),e.ns[d]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,E(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function N(a,b){if(a.opt.xmlns){var c=a.tag,d=L(a.tagName);c.prefix=d.prefix,c.local=d.local,c.uri=c.ns[d.prefix]||"",c.prefix&&!c.uri&&(J(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);var e=a.tags[a.tags.length-1]||a;c.ns&&e.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){E(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var f=0,g=a.attribList.length;f<g;f++){var h=a.attribList[f],i=h[0],j=h[1],k=L(i),l=k.prefix,m=k.local,n=l==""?"":c.ns[l]||"",o={name:i,value:j,prefix:l,local:m,uri:n};l&&l!="xmlns"&&!n&&(J(a,"Unbound namespace prefix: "+JSON.stringify(l)),o.uri=l),a.tag.attributes[i]=o,E(a,"onattribute",o)}a.attribList.length=0}a.tag.isSelfClosing=!!b,a.sawRoot=!0,a.tags.push(a.tag),E(a,"onopentag",a.tag),b||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=C.SCRIPT:a.state=C.TEXT,a.tag=null,a.tagName=""),a.attribName=a.attribValue="",a.attribList.length=0}function O(a){if(!a.tagName){J(a,"Weird empty close tag."),a.textNode+="</>",a.state=C.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">",a.tagName="",a.state=C.SCRIPT;return}E(a,"onscript",a.script),a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());var d=c;while(b--){var e=a.tags[b];if(e.name===d)break;J(a,"Unexpected close tag")}if(b<0){J(a,"Unmatched closing tag: "+a.tagName),a.textNode+="</"+a.tagName+">",a.state=C.TEXT;return}a.tagName=c;var f=a.tags.length;while(f-->b){var g=a.tag=a.tags.pop();a.tagName=a.tag.name,E(a,"onclosetag",a.tagName);var h={};for(var i in g.ns)h[i]=g.ns[i];var j=a.tags[a.tags.length-1]||a;a.opt.xmlns&&g.ns!==j.ns&&Object.keys(g.ns).forEach(function(b){var c=g.ns[b];E(a,"onclosenamespace",{prefix:b,uri:c})})}b===0&&(a.closedRoot=!0),a.tagName=a.attribValue=a.attribName="",a.attribList.length=0,a.state=C.TEXT}function P(a){var b=a.entity,c=b.toLowerCase(),d,e="";return a.ENTITIES[b]?a.ENTITIES[b]:a.ENTITIES[c]?a.ENTITIES[c]:(b=c,b.charAt(0)==="#"&&(b.charAt(1)==="x"?(b=b.slice(2),d=parseInt(b,16),e=d.toString(16)):(b=b.slice(1),d=parseInt(b,10),e=d.toString(10))),b=b.replace(/^0+/,""),e.toLowerCase()!==b?(J(a,"Invalid character entity"),"&"+a.entity+";"):String.fromCharCode(d))}function Q(a){var b=this;if(this.error)throw this.error;if(b.closed)return H(b,"Cannot write after close. Assign an onready handler.");if(a===null)return I(b);var c=0,d="";while(b.c=d=a.charAt(c++)){b.trackPosition&&(b.position++,d==="\n"?(b.line++,b.column=0):b.column++);switch(b.state){case C.BEGIN:d==="<"?(b.state=C.OPEN_WAKA,b.startTagPosition=b.position):B(l,d)&&(J(b,"Non-whitespace before first tag."),b.textNode=d,b.state=C.TEXT);continue;case C.TEXT:if(b.sawRoot&&!b.closedRoot){var f=c-1;while(d&&d!=="<"&&d!=="&")d=a.charAt(c++),d&&b.trackPosition&&(b.position++,d==="\n"?(b.line++,b.column=0):b.column++);b.textNode+=a.substring(f,c-1)}d==="<"?(b.state=C.OPEN_WAKA,b.startTagPosition=b.position):(B(l,d)&&(!b.sawRoot||b.closedRoot)&&J(b,"Text data outside of root node."),d==="&"?b.state=C.TEXT_ENTITY:b.textNode+=d);continue;case C.SCRIPT:d==="<"?b.state=C.SCRIPT_ENDING:b.script+=d;continue;case C.SCRIPT_ENDING:d==="/"?b.state=C.CLOSE_TAG:(b.script+="<"+d,b.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(d==="!")b.state=C.SGML_DECL,b.sgmlDecl="";else if(!A(l,d))if(A(w,d))b.state=C.OPEN_TAG,b.tagName=d;else if(d==="/")b.state=C.CLOSE_TAG,b.tagName="";else if(d==="?")b.state=C.PROC_INST,b.procInstName=b.procInstBody="";else{J(b,"Unencoded <");if(b.startTagPosition+1<b.position){var g=b.position-b.startTagPosition;d=(new Array(g)).join(" ")+d}b.textNode+="<"+d,b.state=C.TEXT}continue;case C.SGML_DECL:(b.sgmlDecl+d).toUpperCase()===r?(E(b,"onopencdata"),b.state=C.CDATA,b.sgmlDecl="",b.cdata=""):b.sgmlDecl+d==="--"?(b.state=C.COMMENT,b.comment="",b.sgmlDecl=""):(b.sgmlDecl+d).toUpperCase()===s?(b.state=C.DOCTYPE,(b.doctype||b.sawRoot)&&J(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):d===">"?(E(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=C.TEXT):A(o,d)?(b.state=C.SGML_DECL_QUOTED,b.sgmlDecl+=d):b.sgmlDecl+=d;continue;case C.SGML_DECL_QUOTED:d===b.q&&(b.state=C.SGML_DECL,b.q=""),b.sgmlDecl+=d;continue;case C.DOCTYPE:d===">"?(b.state=C.TEXT,E(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=d,d==="["?b.state=C.DOCTYPE_DTD:A(o,d)&&(b.state=C.DOCTYPE_QUOTED,b.q=d));continue;case C.DOCTYPE_QUOTED:b.doctype+=d,d===b.q&&(b.q="",b.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:b.doctype+=d,d==="]"?b.state=C.DOCTYPE:A(o,d)&&(b.state=C.DOCTYPE_DTD_QUOTED,b.q=d);continue;case C.DOCTYPE_DTD_QUOTED:b.doctype+=d,d===b.q&&(b.state=C.DOCTYPE_DTD,b.q="");continue;case C.COMMENT:d==="-"?b.state=C.COMMENT_ENDING:b.comment+=d;continue;case C.COMMENT_ENDING:d==="-"?(b.state=C.COMMENT_ENDED,b.comment=G(b.opt,b.comment),b.comment&&E(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+d,b.state=C.COMMENT);continue;case C.COMMENT_ENDED:d!==">"?(J(b,"Malformed comment"),b.comment+="--"+d,b.state=C.COMMENT):b.state=C.TEXT;continue;case C.CDATA:d==="]"?b.state=C.CDATA_ENDING:b.cdata+=d;continue;case C.CDATA_ENDING:d==="]"?b.state=C.CDATA_ENDING_2:(b.cdata+="]"+d,b.state=C.CDATA);continue;case C.CDATA_ENDING_2:d===">"?(b.cdata&&E(b,"oncdata",b.cdata),E(b,"onclosecdata"),b.cdata="",b.state=C.TEXT):d==="]"?b.cdata+="]":(b.cdata+="]]"+d,b.state=C.CDATA);continue;case C.PROC_INST:d==="?"?b.state=C.PROC_INST_ENDING:A(l,d)?b.state=C.PROC_INST_BODY:b.procInstName+=d;continue;case C.PROC_INST_BODY:if(!b.procInstBody&&A(l,d))continue;d==="?"?b.state=C.PROC_INST_ENDING:b.procInstBody+=d;continue;case C.PROC_INST_ENDING:d===">"?(E(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=C.TEXT):(b.procInstBody+="?"+d,b.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:A(x,d)?b.tagName+=d:(K(b),d===">"?N(b):d==="/"?b.state=C.OPEN_TAG_SLASH:(B(l,d)&&J(b,"Invalid character in tag name"),b.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:d===">"?(N(b,!0),O(b)):(J(b,"Forward-slash in opening tag not followed by >"),b.state=C.ATTRIB);continue;case C.ATTRIB:if(A(l,d))continue;d===">"?N(b):d==="/"?b.state=C.OPEN_TAG_SLASH:A(w,d)?(b.attribName=d,b.attribValue="",b.state=C.ATTRIB_NAME):J(b,"Invalid attribute name");continue;case C.ATTRIB_NAME:d==="="?b.state=C.ATTRIB_VALUE:d===">"?(J(b,"Attribute without value"),b.attribValue=b.attribName,M(b),N(b)):A(l,d)?b.state=C.ATTRIB_NAME_SAW_WHITE:A(x,d)?b.attribName+=d:J(b,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(d==="=")b.state=C.ATTRIB_VALUE;else{if(A(l,d))continue;J(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",E(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",d===">"?N(b):A(w,d)?(b.attribName=d,b.state=C.ATTRIB_NAME):(J(b,"Invalid attribute name"),b.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(A(l,d))continue;A(o,d)?(b.q=d,b.state=C.ATTRIB_VALUE_QUOTED):(J(b,"Unquoted attribute value"),b.state=C.ATTRIB_VALUE_UNQUOTED,b.attribValue=d);continue;case C.ATTRIB_VALUE_QUOTED:if(d!==b.q){d==="&"?b.state=C.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=d;continue}M(b),b.q="",b.state=C.ATTRIB;continue;case C.ATTRIB_VALUE_UNQUOTED:if(B(q,d)){d==="&"?b.state=C.ATTRIB_VALUE_ENTITY_U:b.attribValue+=d;continue}M(b),d===">"?N(b):b.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(!b.tagName){if(A(l,d))continue;B(w,d)?b.script?(b.script+="</"+d,b.state=C.SCRIPT):J(b,"Invalid tagname in closing tag."):b.tagName=d}else d===">"?O(b):A(x,d)?b.tagName+=d:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=C.SCRIPT):(B(l,d)&&J(b,"Invalid tagname in closing tag"),b.state=C.CLOSE_TAG_SAW_WHITE);continue;case C.CLOSE_TAG_SAW_WHITE:if(A(l,d))continue;d===">"?O(b):J(b,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:switch(b.state){case C.TEXT_ENTITY:var h=C.TEXT,i="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:var h=C.ATTRIB_VALUE_QUOTED,i="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:var h=C.ATTRIB_VALUE_UNQUOTED,i="attribValue"}d===";"?(b[i]+=P(b),b.entity="",b.state=h):A(p,d)?b.entity+=d:(J(b,"Invalid character entity"),b[i]+="&"+b.entity+d,b.entity="",b.state=h);continue;default:throw new Error(b,"Unknown state: "+b.state)}}return b.position>=b.bufferCheckPosition&&e(b),b}a.parser=function(a,b){return new d(a,b)},a.SAXParser=d,a.SAXStream=k,a.createStream=j,a.MAX_BUFFER_LENGTH=65536;var c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];a.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(a){function b(){this.__proto__=a}return b.prototype=a,new b}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),d.prototype={end:function(){I(this)},write:Q,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{var g=b("stream").Stream}catch(h){var g=function(){}}var i=a.EVENTS.filter(function(a){return a!=="error"&&a!=="end"});k.prototype=Object.create(g.prototype,{constructor:{value:k}}),k.prototype.write=function(a){return this._parser.write(a.toString()),this.emit("data",a),!0},k.prototype.end=function(a){return a&&a.length&&this._parser.write(a.toString()),this._parser.end(),!0},k.prototype.on=function(a,b){var c=this;return!c._parser["on"+a]&&i.indexOf(a)!==-1&&(c._parser["on"+a]=function(){var b=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);b.splice(0,0,a),c.emit.apply(c,b)}),g.prototype.on.call(c,a,b)};var l="\r\n	 ",m="0124356789",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o="'\"",p=m+n+"#",q=l+">",r="[CDATA[",s="DOCTYPE",t="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/2000/xmlns/",v={xml:t,xmlns:u};l=y(l),m=y(m),n=y(n);var w=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;o=y(o),p=y(p),q=y(q);var C=0;a.STATE={BEGIN:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},a.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,
ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(a.ENTITIES).forEach(function(b){var c=a.ENTITIES[b],d=typeof c=="number"?String.fromCharCode(c):c;a.ENTITIES[b]=d});for(var C in a.STATE)a.STATE[a.STATE[C]]=C;C=a.STATE})(typeof a=="undefined"?sax={}:a)}),require.register("scxml/lib/compiler/scxml-to-scjson.js",function(a,b,c){function g(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a}function h(a){var b={};return Object.keys(a).forEach(function(c){b[a[c].local]=a[c].value}),b}function i(a){function j(a){var b=g({$line:f.line,$column:f.column,type:a.local},h(a.attributes)),d;return Array.isArray(c)?c.push(b):c.type==="scxml"&&b.type==="script"?(c.rootScripts=c.rootScripts||[],c.rootScripts.push(b)):(c.actions=c.actions||[],c.actions.push(b)),c=b}function k(a){return g({$line:f.line,$column:f.column},h(a.attributes))}function l(a){var b=h(a.attributes);return b.type&&(b.isDeep=b.type==="deep"?!0:!1),a.local!=="state"&&a.local!=="schema"&&(b.type=a.local),c&&(c.states||(c.states=[]),c.states.push(b)),c=b}function m(a){var b=h(a.attributes);return b.target&&(b.target=b.target.trim().split(/\s+/),b.target.length===1&&(b.target=b.target[0])),c&&(c.transitions||(c.transitions=[]),c.transitions.push(b)),i.push(b),c=b}function n(a){return{$line:f.line,$column:f.column,expr:a}}var b,c,d,e=[],i=[],o={scxml:function(a){return b=l(a)},initial:l,history:l,state:l,parallel:l,"final":l,transition:m,onentry:function(a){c=c.onEntry=[]},onexit:function(a){c=c.onExit=[]},foreach:j,raise:j,log:j,assign:j,validate:j,script:j,cancel:j,send:j,param:function(a){c.params=c.params||[];var b=h(a.attributes);c.params.push(b),c=b},content:function(){},"if":j,elseif:j,"else":j,datamodel:function(a){c=c.datamodel=[]},data:function(a){c.push(k(a))}};d={},f.onopentag=function(a){o[a.local]&&(o[a.local](a),e.push(c),g(c,d),d={})};var p=["cond","array","location","namelist"];return f.onclosetag=function(a){e.pop(),c=e[e.length-1]},f.onattribute=function(a){if(a.name.match(/^.*expr$/)||p.indexOf(a.name)>-1)d[a.name]=n(a.value)},f.onerror=function(a){throw a},f.ontext=function(a){c&&c.type&&(c.type==="script"?c.content=a:c.type==="send"&&(c.content=a))},f.onend=function(){delete b.xmlns,delete b.version,typeof b.datamodel=="string"&&delete b.datamodel,i.forEach(function(a){a.onTransition=a.actions,delete a.actions})},f.write(a).close(),b}var d=b("sax"),e=!0,f=d.parser(e,{trim:!0,xmlns:!0});c.exports=i,b.main===c&&console.log(i(b("fs").readFileSync(process.argv[2],"utf8")))}),require.register("scxml/lib/compiler/scjson-to-module.js",function(a,b,c){function h(a,b){return"$"+a+"_line_"+b.$line+"_column_"+b.$column}function j(a,b){return d&&console.log("generateFnDeclaration",a,b),"function "+a+i+"{\n"+b.split("\n").map(function(a){return"    "+a}).join("\n")+"\n"+"}"}function k(a){return d&&console.log("generateFnCall",a),a+".apply(this, arguments)"}function l(a){d&&console.log("generateActionFunction",a);var b=h(a.type,a),c=E[a.type](a),e=j(b,c);return f.push(e),b}function m(a,b){d&&console.log("generateExpressionFunction",a,b);var c=h(a,b),e="return "+b.expr+";",g=j(c,e);return f.push(g),c}function n(a,b){return d&&console.log("generateAttributeExpression",a,b),m(b,a[b])}function q(){return e.length?"var "+e.map(function(a){return a.id}).join(", ")+";":""}function s(){return e.length?"var $scion_early_binding_datamodel_has_fired = false;\nfunction "+r+i+"{\n"+"    if(!$scion_early_binding_datamodel_has_fired){\n"+e.filter(function(a){return a.expr}).map(function(a){return"        "+a.id+" = "+k(m("data",a))+";\n"}).join("")+"        $scion_early_binding_datamodel_has_fired = true; "+"\n"+"    }\n"+"}":""}function t(a){return JSON.stringify(a,4,4).replace(p,"$1")}function u(){return f.join("\n\n")}function v(){var a=new Date;return"//Generated on "+a.toLocaleDateString()+" "+a.toLocaleTimeString()+" by the SCION SCXML compiler"}function w(a){return"define"+x(a).slice(0,-2)}function x(a){return a.headerString+"\n"+"(function(){\n"+[a.sendString,a.rootScript,a.datamodelDeclaration,a.earlyBindingFnDeclaration,a.actionFunctionDeclarations,"return "+a.objectLiteralString+";"].join("\n\n").split("\n").map(function(a){return"    "+a}).join("\n")+"})()"}function y(a){return[a.headerString,a.rootScript,a.sendString,a.datamodelDeclaration,a.earlyBindingFnDeclaration,a.actionFunctionDeclarations,"module.exports = "+a.objectLiteralString+";"].join("\n\n")}function z(a,b){e.length&&(a.onEntry=a.onEntry||[],a.onEntry=[A(r)].concat(a.onEntry)),console.log("rootState.rootScripts",a.rootScripts);var c={headerString:v(),rootScript:a.rootScripts?a.rootScripts.map(function(a){return a.content}).join("\n"):"",sendString:g?F.toString():"",datamodelDeclaration:q(),earlyBindingFnDeclaration:s(),actionFunctionDeclarations:u()};delete a.rootScripts,c.objectLiteralString=t(a);var d;switch(b){case"amd":d=w(c);break;case"umd":break;case"commonjs":d=y(c);break;default:d=x(c)}return d}function A(a){return o+a+o}function B(a,b){if(a[b]){var c=Array.isArray(a[b])?a[b]:[a[b]];a[b]=c.map(l).map(A),a[b].length===1&&(a[b]=a[b][0])}}function C(a){a.datamodel&&e.push.apply(e,a.datamodel),a.onExit&&B(a,"onExit"),a.onEntry&&B(a,"onEntry"),a.transitions&&a.transitions.forEach(function(a){B(a,"onTransition"),a.cond&&(a.cond=A(n(a,"cond")))}),delete a.datamodel,a.states&&a.states.forEach(function(a){C(a)})}function D(a,b){return b=b||"siaf",e=[],f=[],g=!1,C(a),z(a,b)}function F(a){return a?a.slice(-2)==="ms"?parseFloat(a.slice(0,-2)):a.slice(-1)==="s"?parseFloat(a.slice(0,-1))*1e3:parseFloat(a):0}var d=!1,e,f,g,i="(_event, In, _sessionId, _name, _ioprocessors, _x)",o="__xx__DELETE_ME__xx__",p=new RegExp('"'+o+"(.*)"+o+'"',"g"),r="$initEarlyBindingDatamodel",E={script:function(a){return a.content},assign:function(a){return a.location.expr+" = "+k(n(a,"expr"))+";"},log:function(a){var b=[];return a.label&&b.push(JSON.stringify(a.label)),a.expr&&b.push(k(n(a,"expr"))),"console.log("+b.join(",")+");"},"if":function(a){var b="",c=n(a,"cond");b+="if("+k(c)+"){\n";var d=a.actions;for(var e=0;e<d.length;e++){var f=d[e];if(f.type==="elseif"||f.type==="else")break;b+="    "+k(l(f))+";\n"}for(;e<d.length;e++){f=d[e];if(f.type==="elseif")b+="}else if("+k(n(f,"cond"))+"){\n";else{if(f.type==="else"){b+="}";break}b+="    "+k(l(f))+";\n"}}for(;e<d.length;e++)f=d[e],f.type==="else"?b+="else{\n":b+="    "+k(l(f))+";\n";return b+="}",b},elseif:function(){throw new Error("Encountered unexpected elseif tag.")},"else":function(){throw new Error("Encountered unexpected else tag.")},raise:function(a){return"this.raise({ name:"+JSON.stringify(a.event)+", data : {}});"},cancel:function(a){return"this.cancel("+JSON.stringify(a.sendid)+");"},send:function(a){function b(a,b){var c=b==="id"?"idlocation":b+"expr";if(a[c]){var d=n(a,c);return k(d)}return a[b]?JSON.stringify(a[b]):null}function c(a){if(a.content)return"            "+JSON.stringify(a.content);if(a.contentexpr)return n(a,"contentexpr");var b="{\n",c=[];return a.namelist&&a.namelist.expr.trim().split(/ +/).forEach(function(a){c.push('"'+a+'"'+":"+a)}),a.params&&a.params.length&&a.params.forEach(function(a){a.expr?c.push('"'+a.name+'"'+":"+k(n(a,"expr"))):a.location&&c.push('"'+a.name+'"'+":"+k(n(a,"location")))}),b+=c.map(function(a){return"    "+a}).join(",\n"),b+="\n}",b=b.split("\n").map(function(a){return"            "+a}).join("\n"),b}g=!0;var d=b(a,"target"),e="_scionTargetRef",f="var "+e+" = "+d+";\n",h=["{","   target: "+e+",","   name: "+b(a,"event")+",","   type: "+b(a,"type")+",","   data: \n"+c(a)+",","   origin: _sessionId","}"].map(function(a){return"     "+a}).join("\n"),i=f+"if("+e+" === '#_internal'){\n"+"     this.raise(\n"+h+");\n"+"}else{\n"+"     this.send(\n"+h+", \n"+"       {\n"+"           delay: getDelayInMs("+b(a,"delay")+"),\n"+"           sendId: "+b(a,"id")+"\n"+"       });\n"+"}";return i},foreach:function(a){var b=a.index,c=!a.index,d=a.index||"$i",e=a.item,f=a.array.expr,g=a.actions.map(l),h=(c?"var "+d+";\n":"")+"if(Array.isArray("+f+")){\n"+"    for("+d+" = 0; "+d+" < "+f+".length;"+d+"++){\n"+"       "+e+" = "+f+"["+d+"];\n"+g.map(function(a){return"       "+k(a)+";"}).join("\n")+"\n"+"    }\n"+"} else{\n"+"    for("+d+" in "+f+"){\n"+"        if("+f+".hasOwnProperty("+d+")){\n"+"           "+e+" = "+f+"["+d+"];\n"+g.map(function(a){return"           "+k(a)+";"}).join("\n")+"\n"+"        }\n"+"    }\n"+"}";return h}};c.exports=D;if(b.main===c){process.stdin.setEncoding("utf8"),process.stdin.resume();var G="";process.stdin.on("data",function(a){G+=a}),process.stdin.on("end",function(){var a=D(JSON.parse(G));console.log(a)})}}),require.register("scxml/lib/runtime/transform/util.js",function(a,b,c){c.exports={traverseAndCollectAllScriptAndDataNodesWithSrcAttr:function(a,b){function c(a){var c=a.filter(function(a){return(a.type==="script"||a.type==="data")&&a.src});b.push.apply(b,c)}a.type==="scxml"&&a.rootScripts&&c(a.rootScripts),a.onEntry&&c(a.onEntry),a.onExit&&c(a.onExit),a.transitions&&a.transitions.filter(function(a){return a.onTransition}).map(function(a){return a.onTransition}).forEach(function(a){c(a)});if(a.states){var d=arguments.callee;a.states.forEach(function(a){d(a,b)})}}}}),require.register("scxml/lib/runtime/transform/inline-srcs.js",function(a,b,c){function f(a,b,c,f){var g=[],h=[],i=0;e.traverseAndCollectAllScriptAndDataNodesWithSrcAttr(b,g),g.length?g.forEach(function(b,e){var j=b.src;a&&(j=d.platform.url.resolve(a,j)),d.platform.getResourceFromUrl(j,function(a,c,e){a?(d.platform.log("Error downloading document "+j+" : "+(a.message||a)),h.push({url:j,err:a})):b.content=c,++i,i==g.length&&f(h.length?h:null)},c)}):f()}var d=b("../platform-bootstrap/platform"),e=b("./util");c.exports=f}),require.register("scxml/lib/runtime/platform-bootstrap/browser/path.js",function(a,b,c){"use strict",c.exports={sep:"/",join:function(a,b){return a+"/"+b},dirname:function(a){return a.split(this.sep).slice(0,-1).join(this.sep)},basename:function(a,b){var c=a.split(this.sep).slice(-1);if(b){var d=this.extname(c);d[1]===b&&(c=d[1])}return c},extname:function(a){return a.split(/\\.(?=[^\\.]+$)/)[1]}}}),require.register("scxml/lib/runtime/platform-bootstrap/browser/url.js",function(a,b,c){function d(a){var b=document.createElement("a");return b.href=a,b}"use strict",c.exports={getPathFromUrl:function(a){var b=d(a);return b.pathname},changeUrlPath:function(a,b){var c=d(a);return c.protocol+"//"+c.hostname+":"+c.port+b}}}),require.register("scxml/lib/runtime/platform-bootstrap/browser/platform.js",function(exports,require,module){"use strict";var url=require("./url"),path=require("./path"),platform=module.exports={ajax:window.jQuery,http:{get:function(a,b,c){platform.ajax.get(a,function(a){b(null,a)},"text").error(function(a){b(a)})}},fs:{get:function(a,b,c){platform.http.get.apply(platform,arguments)}},module:{eval:function(s,fileName,context){return eval(s)}},getResourceFromUrl:function(a,b,c){platform.http.get.apply(platform,arguments)},url:{resolve:function(a,b){var c=url.getPathFromUrl(a),d=path.dirname(c),e=path.join(d,b),f=url.changeUrlPath(a,e);return f}},dom:{serializeToString:function(a){return a.xml||(new window.XMLSerializer).serializeToString(a)}},log:function(){window.console.log.apply(window.console,arguments)}}}),require.register("scxml/lib/runtime/platform-bootstrap/browser/index.js",function(a,b,c){var d=b("../platform"),e=b("./platform"),f=b("../../facade"),g=b("scion-ng");d.platform=e,f.scion=g,c.exports=f}),require.register("scxml/lib/runtime/platform-bootstrap/platform.js",function(a,b,c){c.exports={}}),require.register("scxml/lib/runtime/document-string-to-model.js",function(a,b,c){function h(a,b,c,e){var h=d(b);try{g.platform.getResourceFromUrl?f(a,h,e,function(b){b?c(b.length===1?b[0].err:new Error("Script download errors : \n"+b.map(function(a){return a.url+": "+a.err.message}).join("\n"))):i(a,h,e,c)}):i(a,h,e,c)}catch(j){c(j)}}function i(a,b,c,d){g.platform.debug&&console.log("scjson",JSON.stringify(b,4,4));var f=e(b);g.platform.debug&&console.log("jsModuleString\n",f);var h=g.platform.module.eval(f,a,c);g.platform.debug&&console.log("model",h),d(null,h)}"use strict";var d=b("../compiler/scxml-to-scjson"),e=b("../compiler/scjson-to-module"),f=b("./transform/inline-srcs"),g=b("./platform-bootstrap/platform");c.exports=h}),require.register("scxml/lib/runtime/facade.js",function(a,b,c){function f(a,b,c){if(!d.platform.http.get)throw new Error("Platform does not support http.get");d.platform.http.get(a,function(d,f){d?b(d,null):e(a,f,b,c)},c)}function g(a,b,c){if(!d.platform.fs.get)throw new Error("Platform does not support fs.get");c=c||{},c.isLoadedFromFile=!0,d.platform.fs.get(a,function(d,f){d?b(d,null):e(a,f,b,c)},c)}function h(a,b,c){var f=d.platform.dom.serializeToString(a);e(null,f,b,c)}"use strict";var d=b("./platform-bootstrap/platform"),e=b("./document-string-to-model");c.exports={pathToModel:g,urlToModel:f,documentStringToModel:e.bind(this,null),documentToModel:h,ext:{platformModule:d}}}),require.alias("jbeard4-scion-ng/lib/scion.js","scxml/deps/scion-ng/lib/scion.js"),require.alias("jbeard4-scion-ng/lib/scion.js","scxml/deps/scion-ng/index.js"),require.alias("jbeard4-scion-ng/lib/scion.js","scion-ng/index.js"),require.alias("jbeard4-scion-ng/lib/scion.js","jbeard4-scion-ng/index.js"),require.alias("isaacs-sax-js/lib/sax.js","scxml/deps/sax/lib/sax.js"),require.alias("isaacs-sax-js/lib/sax.js","scxml/deps/sax/index.js"),require.alias("isaacs-sax-js/lib/sax.js","sax/index.js"),require.alias("isaacs-sax-js/lib/sax.js","isaacs-sax-js/index.js"),require.alias("scxml/lib/runtime/platform-bootstrap/browser/index.js","scxml/index.js"),typeof exports=="object"?module.exports=require("scxml"):typeof define=="function"&&define.amd?define(function(){return require("scxml")}):this.scxml=require("scxml")})();